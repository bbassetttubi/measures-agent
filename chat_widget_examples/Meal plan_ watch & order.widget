{
  "version": "1.0",
  "name": "Meal plan: watch & order",
  "template": "{\"type\":\"Card\",\"size\":\"md\",\"children\":[{%- set _c -%},{\"type\":\"Row\",\"children\":[{\"type\":\"Title\",\"value\":{{ (title) | tojson }},\"size\":\"sm\"},{\"type\":\"Spacer\"},{\"type\":\"Caption\",\"value\":{{ (dateLabel) | tojson }}}]},{\"type\":\"Divider\"}{%-for item in meals -%},{\"type\":\"Row\",\"key\":{{ (item.id) | tojson }},\"gap\":3,\"align\":\"stretch\",\"children\":[{\"type\":\"Box\",\"background\":\"surface-secondary\",\"radius\":\"sm\",\"padding\":2,\"children\":[{\"type\":\"Badge\",\"label\":{{ (item.mealType) | tojson }}}]},{\"type\":\"Col\",\"gap\":1,\"flex\":1,\"children\":[{\"type\":\"Text\",\"value\":{{ (item.title) | tojson }},\"size\":\"sm\",\"weight\":\"semibold\"},{\"type\":\"Row\",\"gap\":2,\"children\":[{\"type\":\"Button\",\"label\":\"Watch\",\"variant\":\"outline\",\"iconStart\":\"play\",\"onClickAction\":{\"type\":\"open.url\",\"payload\":{\"url\":{{ (item.videoUrl) | tojson }}}}},{\"type\":\"Button\",\"label\":\"Order\",\"style\":\"primary\",\"iconEnd\":\"external-link\",\"onClickAction\":{\"type\":\"open.url\",\"payload\":{\"url\":{{ (item.instacartUrl) | tojson }}}}}]}]}]}{%-endfor-%}{%- endset -%}{{- (_c[1:] if _c and _c[0] == ',' else _c) -}}]}",
  "jsonSchema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
      "title": {
        "type": "string"
      },
      "dateLabel": {
        "type": "string"
      },
      "meals": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "id": {
              "type": "string"
            },
            "mealType": {
              "type": "string",
              "enum": [
                "Breakfast",
                "Lunch",
                "Dinner",
                "Snack"
              ]
            },
            "title": {
              "type": "string"
            },
            "videoUrl": {
              "type": "string",
              "format": "uri"
            },
            "instacartUrl": {
              "type": "string",
              "format": "uri"
            }
          },
          "required": [
            "id",
            "mealType",
            "title",
            "videoUrl",
            "instacartUrl"
          ],
          "additionalProperties": false
        }
      }
    },
    "required": [
      "title",
      "dateLabel",
      "meals"
    ],
    "additionalProperties": false
  },
  "outputJsonPreview": {
    "type": "Card",
    "size": "md",
    "children": [
      {
        "type": "Row",
        "children": [
          {
            "type": "Title",
            "value": "Today's meal plan",
            "size": "sm"
          },
          {
            "type": "Spacer"
          },
          {
            "type": "Caption",
            "value": "Sun, Nov 23, 2025"
          }
        ]
      },
      {
        "type": "Divider"
      },
      {
        "type": "Row",
        "key": "b1",
        "gap": 3,
        "align": "stretch",
        "children": [
          {
            "type": "Box",
            "background": "surface-secondary",
            "radius": "sm",
            "padding": 2,
            "children": [
              {
                "type": "Badge",
                "label": "Breakfast"
              }
            ]
          },
          {
            "type": "Col",
            "gap": 1,
            "flex": 1,
            "children": [
              {
                "type": "Text",
                "value": "Greek yogurt parfait with berries & granola",
                "size": "sm",
                "weight": "semibold"
              },
              {
                "type": "Row",
                "gap": 2,
                "children": [
                  {
                    "type": "Button",
                    "label": "Watch",
                    "variant": "outline",
                    "iconStart": "play",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.youtube.com/watch?v=3ylmD8WQ2O8"
                      }
                    }
                  },
                  {
                    "type": "Button",
                    "label": "Order",
                    "style": "primary",
                    "iconEnd": "external-link",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.instacart.com/store/search?q=greek%20yogurt%20berries%20granola"
                      }
                    }
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "Row",
        "key": "l1",
        "gap": 3,
        "align": "stretch",
        "children": [
          {
            "type": "Box",
            "background": "surface-secondary",
            "radius": "sm",
            "padding": 2,
            "children": [
              {
                "type": "Badge",
                "label": "Lunch"
              }
            ]
          },
          {
            "type": "Col",
            "gap": 1,
            "flex": 1,
            "children": [
              {
                "type": "Text",
                "value": "Chicken quinoa bowl with veggies",
                "size": "sm",
                "weight": "semibold"
              },
              {
                "type": "Row",
                "gap": 2,
                "children": [
                  {
                    "type": "Button",
                    "label": "Watch",
                    "variant": "outline",
                    "iconStart": "play",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.youtube.com/watch?v=A3q3sQm8v6k"
                      }
                    }
                  },
                  {
                    "type": "Button",
                    "label": "Order",
                    "style": "primary",
                    "iconEnd": "external-link",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.instacart.com/store/search?q=chicken%20breast%20quinoa%20broccoli%20bell%20pepper"
                      }
                    }
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "Row",
        "key": "d1",
        "gap": 3,
        "align": "stretch",
        "children": [
          {
            "type": "Box",
            "background": "surface-secondary",
            "radius": "sm",
            "padding": 2,
            "children": [
              {
                "type": "Badge",
                "label": "Dinner"
              }
            ]
          },
          {
            "type": "Col",
            "gap": 1,
            "flex": 1,
            "children": [
              {
                "type": "Text",
                "value": "Baked salmon, roasted potatoes, side salad",
                "size": "sm",
                "weight": "semibold"
              },
              {
                "type": "Row",
                "gap": 2,
                "children": [
                  {
                    "type": "Button",
                    "label": "Watch",
                    "variant": "outline",
                    "iconStart": "play",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.youtube.com/watch?v=2JQFfKSV8nI"
                      }
                    }
                  },
                  {
                    "type": "Button",
                    "label": "Order",
                    "style": "primary",
                    "iconEnd": "external-link",
                    "onClickAction": {
                      "type": "open.url",
                      "payload": {
                        "url": "https://www.instacart.com/store/search?q=salmon%20fillet%20potatoes%20spring%20mix%20lemon"
                      }
                    }
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "encodedWidget": "eyJpZCI6Ijc1NjE5MzU0LWVhODItNDg1Ni1iMTZhLWU1OTJjMjVjMDg5ZCIsIm5hbWUiOiJNZWFsIHBsYW46IHdhdGNoICYgb3JkZXIiLCJ2aWV3IjoiPENhcmQgc2l6ZT1cIm1kXCI-XG4gIDxSb3c-XG4gICAgPFRpdGxlIHZhbHVlPXt0aXRsZX0gc2l6ZT1cInNtXCIgLz5cbiAgICA8U3BhY2VyIC8-XG4gICAgPENhcHRpb24gdmFsdWU9e2RhdGVMYWJlbH0gLz5cbiAgPC9Sb3c-XG4gIDxEaXZpZGVyIC8-XG4gIHttZWFscy5tYXAoKGl0ZW0pID0-IChcbiAgICA8Um93IGtleT17aXRlbS5pZH0gZ2FwPXszfSBhbGlnbj1cInN0cmV0Y2hcIj5cbiAgICAgIDxCb3ggYmFja2dyb3VuZD1cInN1cmZhY2Utc2Vjb25kYXJ5XCIgcmFkaXVzPVwic21cIiBwYWRkaW5nPXsyfT5cbiAgICAgICAgPEJhZGdlIGxhYmVsPXtpdGVtLm1lYWxUeXBlfSAvPlxuICAgICAgPC9Cb3g-XG4gICAgICA8Q29sIGdhcD17MX0gZmxleD17MX0-XG4gICAgICAgIDxUZXh0IHZhbHVlPXtpdGVtLnRpdGxlfSBzaXplPVwic21cIiB3ZWlnaHQ9XCJzZW1pYm9sZFwiIC8-XG4gICAgICAgIDxSb3cgZ2FwPXsyfT5cbiAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICBsYWJlbD1cIldhdGNoXCJcbiAgICAgICAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lXCJcbiAgICAgICAgICAgIGljb25TdGFydD1cInBsYXlcIlxuICAgICAgICAgICAgb25DbGlja0FjdGlvbj17e1xuICAgICAgICAgICAgICB0eXBlOiBcIm9wZW4udXJsXCIsXG4gICAgICAgICAgICAgIHBheWxvYWQ6IHsgdXJsOiBpdGVtLnZpZGVvVXJsIH0sXG4gICAgICAgICAgICB9fVxuICAgICAgICAgIC8-XG4gICAgICAgICAgPEJ1dHRvblxuICAgICAgICAgICAgbGFiZWw9XCJPcmRlclwiXG4gICAgICAgICAgICBzdHlsZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgaWNvbkVuZD1cImV4dGVybmFsLWxpbmtcIlxuICAgICAgICAgICAgb25DbGlja0FjdGlvbj17e1xuICAgICAgICAgICAgICB0eXBlOiBcIm9wZW4udXJsXCIsXG4gICAgICAgICAgICAgIHBheWxvYWQ6IHsgdXJsOiBpdGVtLmluc3RhY2FydFVybCB9LFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1Jvdz5cbiAgICAgIDwvQ29sPlxuICAgIDwvUm93PlxuICApKX1cbjwvQ2FyZD4iLCJkZWZhdWx0U3RhdGUiOnsidGl0bGUiOiJUb2RheSdzIG1lYWwgcGxhbiIsImRhdGVMYWJlbCI6IlN1biwgTm92IDIzLCAyMDI1IiwibWVhbHMiOlt7ImlkIjoiYjEiLCJtZWFsVHlwZSI6IkJyZWFrZmFzdCIsInRpdGxlIjoiR3JlZWsgeW9ndXJ0IHBhcmZhaXQgd2l0aCBiZXJyaWVzICYgZ3Jhbm9sYSIsInZpZGVvVXJsIjoiaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g_dj0zeWxtRDhXUTJPOCIsImluc3RhY2FydFVybCI6Imh0dHBzOi8vd3d3Lmluc3RhY2FydC5jb20vc3RvcmUvc2VhcmNoP3E9Z3JlZWslMjB5b2d1cnQlMjBiZXJyaWVzJTIwZ3Jhbm9sYSJ9LHsiaWQiOiJsMSIsIm1lYWxUeXBlIjoiTHVuY2giLCJ0aXRsZSI6IkNoaWNrZW4gcXVpbm9hIGJvd2wgd2l0aCB2ZWdnaWVzIiwidmlkZW9VcmwiOiJodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PUEzcTNzUW04djZrIiwiaW5zdGFjYXJ0VXJsIjoiaHR0cHM6Ly93d3cuaW5zdGFjYXJ0LmNvbS9zdG9yZS9zZWFyY2g_cT1jaGlja2VuJTIwYnJlYXN0JTIwcXVpbm9hJTIwYnJvY2NvbGklMjBiZWxsJTIwcGVwcGVyIn0seyJpZCI6ImQxIiwibWVhbFR5cGUiOiJEaW5uZXIiLCJ0aXRsZSI6IkJha2VkIHNhbG1vbiwgcm9hc3RlZCBwb3RhdG9lcywgc2lkZSBzYWxhZCIsInZpZGVvVXJsIjoiaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g_dj0ySlFGZktTVjhuSSIsImluc3RhY2FydFVybCI6Imh0dHBzOi8vd3d3Lmluc3RhY2FydC5jb20vc3RvcmUvc2VhcmNoP3E9c2FsbW9uJTIwZmlsbGV0JTIwcG90YXRvZXMlMjBzcHJpbmclMjBtaXglMjBsZW1vbiJ9XX0sInN0YXRlcyI6W10sInNjaGVtYSI6ImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCJcblxuY29uc3QgTWVhbCA9IHouc3RyaWN0T2JqZWN0KHtcbiAgaWQ6IHouc3RyaW5nKCksXG4gIG1lYWxUeXBlOiB6LmVudW0oW1wiQnJlYWtmYXN0XCIsIFwiTHVuY2hcIiwgXCJEaW5uZXJcIiwgXCJTbmFja1wiXSksXG4gIHRpdGxlOiB6LnN0cmluZygpLFxuICB2aWRlb1VybDogei5zdHJpbmcoKS51cmwoKSxcbiAgaW5zdGFjYXJ0VXJsOiB6LnN0cmluZygpLnVybCgpLFxufSlcblxuY29uc3QgV2lkZ2V0U3RhdGUgPSB6LnN0cmljdE9iamVjdCh7XG4gIHRpdGxlOiB6LnN0cmluZygpLFxuICBkYXRlTGFiZWw6IHouc3RyaW5nKCksXG4gIG1lYWxzOiB6LmFycmF5KE1lYWwpLFxufSlcblxuZXhwb3J0IGRlZmF1bHQgV2lkZ2V0U3RhdGUiLCJqc29uU2NoZW1hIjp7fSwic2NoZW1hTW9kZSI6InpvZCIsInNjaGVtYVZhbGlkaXR5IjoidmFsaWQiLCJ2aWV3VmFsaWRpdHkiOiJ2YWxpZCIsImRlZmF1bHRTdGF0ZVZhbGlkaXR5IjoidmFsaWQifQ"
}